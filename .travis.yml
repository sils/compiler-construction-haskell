language: haskell

notifications:
  recipients:
    - lasse@schuirmann.net
  email:
    on_failure: always
    on_success: change

ghc:
  - 7.6
  - 7.4

install:
  - git clone https://github.com/BNFC/bnfc --depth 1 bnfc
  - cd bnfc/source
  - sudo cabal install
  - sudo apt-get install build-essential haskell-platform llvm
  - sudo cabal update
  - sudo cabal install cabal-install
  - sudo cabal install mtl
  - sudo cabal install llvm-general
  - sudo ghc-pkg list
  - cd ../..
  - sudo apt-get install python3
  - git clone https://github.com/coala-analyzer/coala --depth 1 coala
  - cd coala
  - sudo python3 setup.py install
  - cd ..
  - sudo rm -rf bnfc coala

script:
  - sudo sh run_tests.sh
  - coala
